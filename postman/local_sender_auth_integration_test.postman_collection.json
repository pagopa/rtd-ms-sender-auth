{
	"info": {
		"_postman_id": "5d10ab2d-1a5c-4ea7-ba57-dd65c8e5be73",
		"name": "Local Sender Auth Micro-service Integration test",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "001a - Fail PUT api key: missing sender code",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('001a - Fail PUT api key missing sender code', () => {",
							"    pm.response.to.have.status(404);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{put_api_key_url}}{{sender_code_blank}}/{{api_key_test}}",
					"host": [
						"{{base_url}}{{put_api_key_url}}{{sender_code_blank}}"
					],
					"path": [
						"{{api_key_test}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "001b - Fail PUT api key: missing api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('001b - Fail PUT api key: missing api key', () => {",
							"    pm.response.to.have.status(404);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{put_api_key_url}}{{sender_code_test}}/",
					"host": [
						"{{base_url}}{{put_api_key_url}}{{sender_code_test}}"
					],
					"path": [
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "001 - PUT api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('001 - PUT api key', () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{put_api_key_url}}{{sender_code_test}}/{{api_key_test}}",
					"host": [
						"{{base_url}}{{put_api_key_url}}{{sender_code_test}}"
					],
					"path": [
						"{{api_key_test}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "002a - Fail GET sender code: missing query param",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('002a - Fail GET sender code: missing query param', () => {",
							"    pm.response.to.have.status(400);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "",
							"value": "",
							"disabled": true
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "002b - Fail GET sender code: missing param value",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('002b - Fail GET sender code: missing param value', () => {",
							"    pm.response.to.have.status(404);",
							"    pm.response.to.have.body(\"\");",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}?{{api_key_query_param}}=",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "{{api_key_query_param}}",
							"value": ""
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "002c - Fail GET sender code: api key not found",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('002c - Fail GET sender code: api key not found', () => {",
							"    pm.response.to.have.status(404);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}?{{api_key_query_param}}={{api_key_not_existing}}",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "{{api_key_query_param}}",
							"value": "{{api_key_not_existing}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "002 - GET sender code by api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('002 - GET sender code by api key', () => {",
							"    pm.response.to.have.status(200);",
							"    pm.response.to.have.body(pm.variables.get('sender_code_test'));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}?{{api_key_query_param}}={{api_key_test}}",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "{{api_key_query_param}}",
							"value": "{{api_key_test}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "003a - Fail PUT api key: different sender code same api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('003a - Fail PUT api key: different sender code same api key', () => {",
							"    pm.response.to.have.status(400);",
							"    pm.response.to.have.body(pm.variables.get('internal_id_already_associated'));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{put_api_key_url}}{{another_sender_code}}/{{api_key_test}}",
					"host": [
						"{{base_url}}{{put_api_key_url}}{{another_sender_code}}"
					],
					"path": [
						"{{api_key_test}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "003 - PUT api key: same sender code same api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('003 - PUT api key: same sender code same api key', () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{put_api_key_url}}{{sender_code_test}}/{{api_key_test}}",
					"host": [
						"{{base_url}}{{put_api_key_url}}{{sender_code_test}}"
					],
					"path": [
						"{{api_key_test}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "004 - GET sender code by api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('004 - GET sender code by api key', () => {",
							"    pm.response.to.have.status(200);",
							"    pm.response.to.have.body(pm.variables.get('sender_code_test'));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}?{{api_key_query_param}}={{api_key_test}}",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "{{api_key_query_param}}",
							"value": "{{api_key_test}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "005 - PUT api key: different sender code different api key",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('005 - PUT api key: different sender code different api key', () => {",
							"    pm.response.to.have.status(200);",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{put_api_key_url}}{{another_sender_code}}/{{another_api_key}}",
					"host": [
						"{{base_url}}{{put_api_key_url}}{{another_sender_code}}"
					],
					"path": [
						"{{another_api_key}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "005a - GET second sender code",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('005a - GET second sender code', () => {",
							"    pm.response.to.have.status(200);",
							"    pm.response.to.have.body(pm.variables.get('another_sender_code'));",
							"});",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}?{{api_key_query_param}}={{another_api_key}}",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "{{api_key_query_param}}",
							"value": "{{another_api_key}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "005b - GET first sender code",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test('005b - GET first sender code', () => {",
							"    pm.response.to.have.status(200);",
							"    pm.response.to.have.body(pm.variables.get('sender_code_test'));",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}{{get_sender_code_url}}?{{api_key_query_param}}={{api_key_test}}",
					"host": [
						"{{base_url}}{{get_sender_code_url}}"
					],
					"query": [
						{
							"key": "{{api_key_query_param}}",
							"value": "{{api_key_test}}"
						}
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "localhost:8080",
			"type": "default"
		},
		{
			"key": "put_api_key_url",
			"value": "/",
			"type": "default"
		},
		{
			"key": "get_sender_code_url",
			"value": "/sender-code",
			"type": "default"
		},
		{
			"key": "sender_code_test",
			"value": "12345",
			"type": "default"
		},
		{
			"key": "api_key_test",
			"value": "apikeyprova",
			"type": "default"
		},
		{
			"key": "sender_code_blank",
			"value": "",
			"type": "default"
		},
		{
			"key": "api_key_query_param",
			"value": "internalId",
			"type": "default"
		},
		{
			"key": "api_key_not_existing",
			"value": "apikeynotexisting",
			"type": "default"
		},
		{
			"key": "another_api_key",
			"value": "anotherApiKey",
			"type": "default"
		},
		{
			"key": "another_sender_code",
			"value": "BADSC",
			"type": "default"
		},
		{
			"key": "record_not_found",
			"value": "record not found",
			"type": "default"
		},
		{
			"key": "internal_id_already_associated",
			"value": "internal id already associated",
			"type": "default"
		}
	]
}